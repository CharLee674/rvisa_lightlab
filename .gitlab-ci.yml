test-master:
  image: python:3.6
  stage: test
  tags:
  - docker-python
  - cassander
  only:
    - master
  script:
  - pip install -U virtualenv pip
  - python --version
  - make test
  - make test-lint
  - make test-nb

test-dev:
  image: python:3.6
  stage: test
  tags:
  - docker-python
  - cassander
  except:
    - master
  script:
  - pip install -U virtualenv pip
  - python --version
  - make test
  - make test-nb

deploy-dev:
  stage: deploy
  tags:
  - jupyter-shell
  - cassander
  only:
    - gitlab-ci
  script:
  - source $VIRTUALENVWRAPPER_HOOK_DIR/development/bin/activate
  - pip install -e .
